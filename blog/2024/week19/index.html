<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Coding week19 10/07-10/13 | Zebin Huang | JdeRobot x GSoC2024 </title> <meta name="author" content="Zebin Huang"> <meta name="description" content="Parsing and generating driving test cases in CARLA Town02 map with OpenDRIVE"> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/gsoc2024-ZebinHuang/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/gsoc2024-ZebinHuang/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/gsoc2024-ZebinHuang/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/gsoc2024-ZebinHuang/assets/img/logo.png?a3cac8c2613225704682d343b37ffd84"> <link rel="stylesheet" href="/gsoc2024-ZebinHuang/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://theroboticsclub.github.io/gsoc2024-ZebinHuang/blog/2024/week19/"> <script src="/gsoc2024-ZebinHuang/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/gsoc2024-ZebinHuang/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/gsoc2024-ZebinHuang/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script src="/gsoc2024-ZebinHuang/assets/js/distillpub/template.v2.js"></script> <script src="/gsoc2024-ZebinHuang/assets/js/distillpub/transforms.v2.js"></script> <script src="/gsoc2024-ZebinHuang/assets/js/distillpub/overrides.js"></script> </head> <body> <d-front-matter> <script async type="text/json">
      {
            "title": "Coding week19 10/07-10/13",
            "description": "Parsing and generating driving test cases in CARLA Town02 map with OpenDRIVE",
            "published": "October 07, 2024",
            "authors": [
              
              {
                "author": "Zebin Huang",
                "authorURL": "",
                "affiliations": [
                  {
                    "name": "Edinburgh Centre for Robotics",
                    "url": ""
                  }
                ]
              }
              
            ],
            "katex": {
              "delimiters": [
                {
                  "left": "$",
                  "right": "$",
                  "display": false
                },
                {
                  "left": "$$",
                  "right": "$$",
                  "display": true
                }
              ]
            }
          }
    </script> </d-front-matter> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/gsoc2024-ZebinHuang/"> Zebin Huang | JdeRobot x GSoC2024 </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/gsoc2024-ZebinHuang/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/gsoc2024-ZebinHuang/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/gsoc2024-ZebinHuang/repositories/">repositories </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="post distill"> <d-title> <h1>Coding week19 10/07-10/13</h1> <p>Parsing and generating driving test cases in CARLA Town02 map with OpenDRIVE</p> </d-title> <d-byline></d-byline> <d-article> <p>Building on last week’s insights, we recognized that LLMs alone may not accurately get specific distance, which prompted us to explore alternative methods. This week, we experimented with parsing CARLA’s Town02 map in OpenDRIVE format to automate test case generation. By extracting roads and junctions, we defined structured test cases with precise start and end points, route lengths, and directional commands (Left, Right, Straight). Additionally, we implemented an action-distance aware control approach, pairing each action with a specified distance to enhance the precision of driving commands in simulation.</p> <h3 id="introduction">Introduction</h3> <p>This experiment involves parsing the route map from CARLA (<em>Town02</em> as an example), provided in the OpenDRIVE (<code class="language-plaintext highlighter-rouge">.xodr</code>) format, and generating test cases that define driving scenarios. The map file is available in <a href="https://github.com/carla-simulator/opendrive-test-files/blob/master/OpenDrive/Town02.xodr" rel="external nofollow noopener" target="_blank">Github repo</a>.</p> <p>These test cases include start and end indices, route lengths, and high-level commands such as <em>Left</em>, <em>Right</em>, and <em>Straight</em>.</p> <p>The goal is to automate test case generation based on the map structure, which includes roads, junctions, and their connections. This report details the steps of the experiment, including code, results, and analysis.</p> <h3 id="parsing-opendrive-map">Parsing OpenDRIVE Map</h3> <p>The <em>Town02</em> map file is provided in OpenDRIVE format. This map contains essential elements such as roads and junctions, which define the road network’s topology. The OpenDRIVE file contains:</p> <ul> <li> <strong>68 roads</strong>: Each road has an associated ID and length, which defines the road’s geometry.</li> <li> <strong>8 junctions</strong>: These represent intersections where multiple roads connect.</li> </ul> <p>The Python code used to parse the OpenDRIVE map file:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">xml.etree.ElementTree</span> <span class="k">as</span> <span class="n">ET</span>

<span class="n">tree</span> <span class="o">=</span> <span class="n">ET</span><span class="p">.</span><span class="nf">parse</span><span class="p">(</span><span class="n">file_path</span><span class="p">)</span>
<span class="n">root</span> <span class="o">=</span> <span class="n">tree</span><span class="p">.</span><span class="nf">getroot</span><span class="p">()</span>

<span class="c1"># Extract roads and junctions
</span><span class="n">roads</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">junctions</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">root</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">element</span><span class="p">.</span><span class="n">tag</span> <span class="o">==</span> <span class="sh">'</span><span class="s">road</span><span class="sh">'</span><span class="p">:</span>
        <span class="n">roads</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">element</span><span class="p">.</span><span class="n">tag</span> <span class="o">==</span> <span class="sh">'</span><span class="s">junction</span><span class="sh">'</span><span class="p">:</span>
        <span class="n">junctions</span><span class="p">.</span><span class="nf">append</span><span class="p">(</span><span class="n">element</span><span class="p">)</span>

<span class="c1"># Function to extract road details
</span><span class="k">def</span> <span class="nf">parse_road</span><span class="p">(</span><span class="n">road_element</span><span class="p">):</span>
    <span class="n">road_id</span> <span class="o">=</span> <span class="n">road_element</span><span class="p">.</span><span class="n">attrib</span><span class="p">[</span><span class="sh">'</span><span class="s">id</span><span class="sh">'</span><span class="p">]</span>
    <span class="n">road_length</span> <span class="o">=</span> <span class="nf">float</span><span class="p">(</span><span class="n">road_element</span><span class="p">.</span><span class="n">attrib</span><span class="p">.</span><span class="nf">get</span><span class="p">(</span><span class="sh">'</span><span class="s">length</span><span class="sh">'</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="k">return</span> <span class="p">{{</span><span class="sh">'</span><span class="s">id</span><span class="sh">'</span><span class="p">:</span> <span class="n">road_id</span><span class="p">,</span> <span class="sh">'</span><span class="s">length</span><span class="sh">'</span><span class="p">:</span> <span class="n">road_length</span><span class="p">}}</span>

<span class="n">parsed_roads</span> <span class="o">=</span> <span class="p">[</span><span class="nf">parse_road</span><span class="p">(</span><span class="n">road</span><span class="p">)</span> <span class="k">for</span> <span class="n">road</span> <span class="ow">in</span> <span class="n">roads</span><span class="p">]</span>

<span class="k">def</span> <span class="nf">parse_junction</span><span class="p">(</span><span class="n">junction_element</span><span class="p">):</span>
    <span class="n">junction_id</span> <span class="o">=</span> <span class="n">junction_element</span><span class="p">.</span><span class="n">attrib</span><span class="p">[</span><span class="sh">'</span><span class="s">id</span><span class="sh">'</span><span class="p">]</span>
    <span class="n">connections</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">connection</span> <span class="ow">in</span> <span class="n">junction_element</span><span class="p">.</span><span class="nf">findall</span><span class="p">(</span><span class="sh">'</span><span class="s">connection</span><span class="sh">'</span><span class="p">):</span>
        <span class="n">incoming_road</span> <span class="o">=</span> <span class="n">connection</span><span class="p">.</span><span class="n">attrib</span><span class="p">[</span><span class="sh">'</span><span class="s">incomingRoad</span><span class="sh">'</span><span class="p">]</span>
        <span class="n">connecting_road</span> <span class="o">=</span> <span class="n">connection</span><span class="p">.</span><span class="n">attrib</span><span class="p">[</span><span class="sh">'</span><span class="s">connectingRoad</span><span class="sh">'</span><span class="p">]</span>
        <span class="n">connections</span><span class="p">.</span><span class="nf">append</span><span class="p">({</span>
            <span class="sh">'</span><span class="s">incoming_road</span><span class="sh">'</span><span class="p">:</span> <span class="n">incoming_road</span><span class="p">,</span>
            <span class="sh">'</span><span class="s">connecting_road</span><span class="sh">'</span><span class="p">:</span> <span class="n">connecting_road</span>
        <span class="p">})</span>
    <span class="k">return</span> <span class="p">{{</span><span class="sh">'</span><span class="s">id</span><span class="sh">'</span><span class="p">:</span> <span class="n">junction_id</span><span class="p">,</span> <span class="sh">'</span><span class="s">connections</span><span class="sh">'</span><span class="p">:</span> <span class="n">connections</span><span class="p">}}</span>

<span class="n">parsed_junctions</span> <span class="o">=</span> <span class="p">[</span><span class="nf">parse_junction</span><span class="p">(</span><span class="n">junction</span><span class="p">)</span> <span class="k">for</span> <span class="n">junction</span> <span class="ow">in</span> <span class="n">junctions</span><span class="p">]</span>
</code></pre></div></div> <p>From the OpenDRIVE map, we parsed 68 roads, with lengths such as:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"20"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"connections"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{{</span><span class="w">
        </span><span class="nl">"incoming_road"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"connecting_road"</span><span class="p">:</span><span class="w"> </span><span class="s2">"21"</span><span class="w">
      </span><span class="p">}}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}},</span><span class="w">
  </span><span class="p">{{</span><span class="w">
    </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"55"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"connections"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="p">{{</span><span class="w">
        </span><span class="nl">"incoming_road"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"connecting_road"</span><span class="p">:</span><span class="w"> </span><span class="s2">"66"</span><span class="w">
      </span><span class="p">}}</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <h3 id="action-aware-route-generation">Action-aware Route Generation</h3> <p>Using the parsed roads and junctions, we generate routes between start and endpoints. Additionally, high-level driving commands such as <em>Left</em>, <em>Right</em>, and <em>Straight</em> are determined based on the relative orientation of consecutive road segments.</p> <p>The following code was used to generate random test cases:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kn">import</span> <span class="n">random</span>

<span class="k">def</span> <span class="nf">generate_test_case</span><span class="p">(</span><span class="n">parsed_roads</span><span class="p">,</span> <span class="n">parsed_junctions</span><span class="p">):</span>
    <span class="n">start_road</span> <span class="o">=</span> <span class="n">random</span><span class="p">.</span><span class="nf">choice</span><span class="p">(</span><span class="n">parsed_roads</span><span class="p">)</span>
    <span class="n">end_road</span> <span class="o">=</span> <span class="n">random</span><span class="p">.</span><span class="nf">choice</span><span class="p">(</span><span class="n">parsed_roads</span><span class="p">)</span>

    <span class="n">route_length</span> <span class="o">=</span> <span class="n">start_road</span><span class="p">[</span><span class="sh">'</span><span class="s">length</span><span class="sh">'</span><span class="p">]</span> <span class="o">+</span> <span class="n">end_road</span><span class="p">[</span><span class="sh">'</span><span class="s">length</span><span class="sh">'</span><span class="p">]</span> <span class="o">+</span> <span class="n">random</span><span class="p">.</span><span class="nf">uniform</span><span class="p">(</span><span class="mi">20</span><span class="p">,</span> <span class="mi">100</span><span class="p">)</span>

    <span class="c1"># Please note here it's randomly generated
</span>    <span class="n">possible_commands</span> <span class="o">=</span> <span class="p">[</span><span class="sh">'</span><span class="s">Left</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span><span class="p">,</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span><span class="p">]</span>
    <span class="n">commands</span> <span class="o">=</span> <span class="p">[</span><span class="n">random</span><span class="p">.</span><span class="nf">choice</span><span class="p">(</span><span class="n">possible_commands</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">2</span><span class="p">)]</span>

    <span class="k">return</span> <span class="p">{{</span>
        <span class="sh">'</span><span class="s">start_index</span><span class="sh">'</span><span class="p">:</span> <span class="nf">int</span><span class="p">(</span><span class="n">start_road</span><span class="p">[</span><span class="sh">'</span><span class="s">id</span><span class="sh">'</span><span class="p">]),</span>
        <span class="sh">'</span><span class="s">end_index</span><span class="sh">'</span><span class="p">:</span> <span class="nf">int</span><span class="p">(</span><span class="n">end_road</span><span class="p">[</span><span class="sh">'</span><span class="s">id</span><span class="sh">'</span><span class="p">]),</span>
        <span class="sh">'</span><span class="s">route_length</span><span class="sh">'</span><span class="p">:</span> <span class="nf">round</span><span class="p">(</span><span class="n">route_length</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span>
        <span class="sh">'</span><span class="s">commands</span><span class="sh">'</span><span class="p">:</span> <span class="n">commands</span>
    <span class="p">}}</span>

<span class="n">test_cases</span> <span class="o">=</span> <span class="p">[</span><span class="nf">generate_test_case</span><span class="p">(</span><span class="n">parsed_roads</span><span class="p">,</span> <span class="n">parsed_junctions</span><span class="p">)</span> <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nf">range</span><span class="p">(</span><span class="mi">10</span><span class="p">)]</span>
</code></pre></div></div> <table> <thead> <tr> <th><strong>Start Index</strong></th> <th><strong>End Index</strong></th> <th><strong>Route Length (m)</strong></th> <th><strong>High-Level Commands</strong></th> </tr> </thead> <tbody> <tr> <td>124</td> <td>70</td> <td>93.71</td> <td>Right, Straight</td> </tr> <tr> <td>110</td> <td>119</td> <td>89.68</td> <td>Straight, Straight</td> </tr> <tr> <td>288</td> <td>229</td> <td>113.14</td> <td>Straight, Left</td> </tr> <tr> <td>9</td> <td>4</td> <td>107.76</td> <td>Left, Straight</td> </tr> <tr> <td>111</td> <td>298</td> <td>89.86</td> <td>Straight, Right</td> </tr> </tbody> </table> <p>Below is the JSON representation of the generated test cases:</p> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="w">
    </span><span class="p">{{</span><span class="w">
        </span><span class="nl">"start_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">124</span><span class="p">,</span><span class="w">
        </span><span class="nl">"end_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w">
        </span><span class="nl">"route_length"</span><span class="p">:</span><span class="w"> </span><span class="mf">93.71</span><span class="p">,</span><span class="w">
        </span><span class="nl">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Right"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Straight"</span><span class="p">]</span><span class="w">
    </span><span class="p">}},</span><span class="w">
    </span><span class="p">{{</span><span class="w">
        </span><span class="nl">"start_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">110</span><span class="p">,</span><span class="w">
        </span><span class="nl">"end_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">119</span><span class="p">,</span><span class="w">
        </span><span class="nl">"route_length"</span><span class="p">:</span><span class="w"> </span><span class="mf">89.68</span><span class="p">,</span><span class="w">
        </span><span class="nl">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Straight"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Straight"</span><span class="p">]</span><span class="w">
    </span><span class="p">}},</span><span class="w">
    </span><span class="p">{{</span><span class="w">
        </span><span class="nl">"start_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">288</span><span class="p">,</span><span class="w">
        </span><span class="nl">"end_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">229</span><span class="p">,</span><span class="w">
        </span><span class="nl">"route_length"</span><span class="p">:</span><span class="w"> </span><span class="mf">113.14</span><span class="p">,</span><span class="w">
        </span><span class="nl">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Straight"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Left"</span><span class="p">]</span><span class="w">
    </span><span class="p">}},</span><span class="w">
    </span><span class="p">{{</span><span class="w">
        </span><span class="nl">"start_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">9</span><span class="p">,</span><span class="w">
        </span><span class="nl">"end_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w">
        </span><span class="nl">"route_length"</span><span class="p">:</span><span class="w"> </span><span class="mf">107.76</span><span class="p">,</span><span class="w">
        </span><span class="nl">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Left"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Straight"</span><span class="p">]</span><span class="w">
    </span><span class="p">}},</span><span class="w">
    </span><span class="p">{{</span><span class="w">
        </span><span class="nl">"start_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">111</span><span class="p">,</span><span class="w">
        </span><span class="nl">"end_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">298</span><span class="p">,</span><span class="w">
        </span><span class="nl">"route_length"</span><span class="p">:</span><span class="w"> </span><span class="mf">89.86</span><span class="p">,</span><span class="w">
        </span><span class="nl">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"Straight"</span><span class="p">,</span><span class="w"> </span><span class="s2">"Right"</span><span class="p">]</span><span class="w">
    </span><span class="p">}}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre></div></div> <h3 id="action-distance-aware-control">Action-Distance Aware Control</h3> <p>In our previous approach, the control system was designed to be <strong>action-aware</strong>. This means that between any two junctions (e.g., <code class="language-plaintext highlighter-rouge">Junction1</code> to <code class="language-plaintext highlighter-rouge">Junction2</code>), we defined the driving actions such as <em>Left</em>, <em>Right</em>, or <em>Straight</em>. However, this method does not take into account the distance required to perform these actions.</p> <p>This motivates us to redefine the control system as <strong>action-distance aware</strong>, where both the driving action and the associated distance are considered as part of the control strategy. By integrating distance awareness, we aim to control the precise execution of actions based on the distance travelled.</p> <p>In the new approach, each control instruction is associated with both an <strong>action</strong> and a <strong>distance</strong>. This means that for each route segment, we define not only the type of action to be taken but also the precise distance over which the action must be performed.</p> <h3 id="new-action-distance-aware-test-case">New Action-Distance Aware Test Case</h3> <div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{{</span><span class="w">
    </span><span class="nl">"start_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">124</span><span class="p">,</span><span class="w">
    </span><span class="nl">"end_index"</span><span class="p">:</span><span class="w"> </span><span class="mi">70</span><span class="p">,</span><span class="w">
    </span><span class="nl">"route_length"</span><span class="p">:</span><span class="w"> </span><span class="mf">93.71</span><span class="p">,</span><span class="w">
    </span><span class="nl">"commands"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{{</span><span class="w">
            </span><span class="nl">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Right"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mi">50</span><span class="w">
        </span><span class="p">}},</span><span class="w">
        </span><span class="p">{{</span><span class="w">
            </span><span class="nl">"action"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Straight"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">43.71</span><span class="w">
        </span><span class="p">}}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}}</span><span class="w">
</span></code></pre></div></div> <p>In this new test case, the vehicle will:</p> <ul> <li>Execute a <em>Right</em> turn over the first 50 meters.</li> <li>Continue <em>Straight</em> for the remaining 43.71 meters.</li> </ul> <p>This new <strong>action-distance aware</strong> approach allows for a more flexible and accurate driving behavior, with both actions and distances specified for each route segment.</p> <p>We integrated distance measurement and action switching into model control. The video shows the model adjusting high-level commands based on distance, though some cases still need improvement.</p> <iframe width="700" height="500" src="https://www.youtube.com/embed/YmhcweTFlSU" title="Distance test case 1" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share" referrerpolicy="strict-origin-when-cross-origin" allowfullscreen=""></iframe> </d-article> <d-appendix> <d-footnote-list></d-footnote-list> <d-citation-list></d-citation-list> </d-appendix> <d-bibliography src="/gsoc2024-ZebinHuang/assets/bibliography/posts.bib"></d-bibliography> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Zebin Huang. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/gsoc2024-ZebinHuang/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>