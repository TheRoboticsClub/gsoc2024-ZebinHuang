<!DOCTYPE html> <html> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> Coding week7 7/08-7/14 | Zebin Huang | JdeRobot x GSoC2024 </title> <meta name="author" content="Zebin Huang"> <meta name="description" content="Zebin Huang | JdeRobot x GSoC2024 "> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/gsoc2024-ZebinHuang/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/gsoc2024-ZebinHuang/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/gsoc2024-ZebinHuang/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="/gsoc2024-ZebinHuang/assets/img/logo.png?a3cac8c2613225704682d343b37ffd84"> <link rel="stylesheet" href="/gsoc2024-ZebinHuang/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://theroboticsclub.github.io/gsoc2024-ZebinHuang/blog/2024/coding-week7-7-08-7-14/"> <script src="/gsoc2024-ZebinHuang/assets/js/theme.js?a5ca4084d3b81624bcfa01156dae2b8e"></script> <link defer rel="stylesheet" href="/gsoc2024-ZebinHuang/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/gsoc2024-ZebinHuang/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.0/es5/tex-mml-chtml.min.js" integrity="sha256-rjmgmaB99riUNcdlrDtcAiwtLIojSxNyUFdl+Qh+rB4=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script src="/gsoc2024-ZebinHuang/assets/js/distillpub/template.v2.js"></script> <script src="/gsoc2024-ZebinHuang/assets/js/distillpub/transforms.v2.js"></script> <script src="/gsoc2024-ZebinHuang/assets/js/distillpub/overrides.js"></script> </head> <body> <d-front-matter> <script async type="text/json">
      {
            "title": "Coding week7 7/08-7/14",
            "description": "",
            "published": "July 14, 2024",
            "authors": [
              
              {
                "author": "Zebin Huang",
                "authorURL": "",
                "affiliations": [
                  {
                    "name": "Edinburgh Centre for Robotics",
                    "url": ""
                  }
                ]
              }
              
            ],
            "katex": {
              "delimiters": [
                {
                  "left": "$",
                  "right": "$",
                  "display": false
                },
                {
                  "left": "$$",
                  "right": "$$",
                  "display": true
                }
              ]
            }
          }
    </script> </d-front-matter> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/gsoc2024-ZebinHuang/"> Zebin Huang | JdeRobot x GSoC2024 </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/gsoc2024-ZebinHuang/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/gsoc2024-ZebinHuang/blog/">blog </a> </li> <li class="nav-item "> <a class="nav-link" href="/gsoc2024-ZebinHuang/repositories/">repositories </a> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="post distill"> <d-title> <h1>Coding week7 7/08-7/14</h1> <p></p> </d-title> <d-byline></d-byline> <d-article> <h3 id="weekly-meeting">Weekly Meeting</h3> <p>During the July 10 meeting, we focused on refining our dataset and integrating our models into the overall framework. We discussed the use of iterative generation techniques to remove duplicated lines from our datasets, aiming to establish a robust baseline for our project. We also explored the implementation of high-level commands with text inputs for the model.</p> <p>Two key questions were raised during the meeting:</p> <ul> <li>Route Selection: If there is no predefined route, the function <code class="language-plaintext highlighter-rouge">get_random_hlc</code> will randomly select a command. This method needs further clarification to ensure it aligns with our overall approach.</li> <li>Instruction Classification: There was a discussion on the necessity of predefined data for classification purposes. Despite having the ground truth, the reason for classifying predefined data needs further elaboration to ensure it enhances the model’s performance effectively. These discussions and clarifications are crucial as we integrate the model into the framework, moving towards our project’s first baseline.</li> </ul> <p>More details can be found here: <a href="https://docs.google.com/document/d/1b2ZEU5Gt8gP2ae_YzNSJSd7RukUrsG_aDJFLnbvoQiM/edit" rel="external nofollow noopener" target="_blank">Google Doc</a></p> <h3 id="data-generation-performance-optimization">Data Generation Performance Optimization</h3> <p>Recently, the focus has been on optimizing the performance of data generation. In previous work, it was noticeable that calling the API consumed a significant amount of time. Here is a potential analysis of the reasons for the slowness, which may involve two situations:</p> <ol> <li>The number of parallel requests is too small, resulting in request limitations.</li> <li>Each call requires a long return time.</li> </ol> <h3 id="api-rate-limits">API Rate Limits</h3> <p>I checked the <a href="https://platform.openai.com/docs/guides/rate-limits" rel="external nofollow noopener" target="_blank">GPT documentation</a> and found the following notes on rate limits.</p> <p><em>Rate limits</em></p> <p><em>Rate limits are restrictions that our API imposes on the number of times a user or client can access our services within a specified period of time.</em></p> <p><em>How do these rate limits work?</em></p> <p><em>Rate limits are measured in five ways: <strong>RPM</strong> (requests per minute), <strong>RPD</strong> (requests per day), <strong>TPM</strong> (tokens per minute), <strong>TPD</strong> (tokens per day), and <strong>IPM</strong> (images per minute). Rate limits can be hit across any of the options depending on what occurs first. For example, you might send 20 requests with only 100 tokens to the ChatCompletions endpoint and that would fill your limit (if your RPM was 20), even if you did not send 150k tokens (if your TPM limit was 150k) within those 20 requests.</em></p> <p>OpenAI calculates different rates based on different prepayment levels. Currently, my account is at Tier 2. As observed, even within Tier 2, GPT-3.5-turbo is faster than GPT-4. This means there are more parallel requests available. Therefore, the performance bottleneck should mainly be in point 2: <strong>each call requires a long return time</strong>. I speculate that the performance bottleneck is likely due to the time taken for each request’s model inference and the network latency.</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/gsoc2024-ZebinHuang/assets/img/rate_limit-480.webp 480w,/gsoc2024-ZebinHuang/assets/img/rate_limit-800.webp 800w,/gsoc2024-ZebinHuang/assets/img/rate_limit-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/gsoc2024-ZebinHuang/assets/img/rate_limit.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h3 id="how-can-we-reduce-the-number-of-calls">How can we reduce the number of calls?</h3> <p>In the original code, instructions generation was done one by one, meaning each time a command was generated, an API call was made. Even with the Batch method, the implementation of this batch method does not reduce <strong>the number of API calls</strong>.</p> <p>This method becomes very slow when a large number of commands need to be generated because each API call incurs network latency and processing time. Additionally, if the generated commands are duplicated, they need to be regenerated, further increasing the time consumption.</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/gsoc2024-ZebinHuang/assets/img/batch-480.webp 480w,/gsoc2024-ZebinHuang/assets/img/batch-800.webp 800w,/gsoc2024-ZebinHuang/assets/img/batch-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/gsoc2024-ZebinHuang/assets/img/batch.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>To improve the speed of command generation, we have adopted the following two main optimization methods:</p> <ol> <li>Batch Generation with One-time Request: One-time request can reduce the number of API calls, thereby reducing the overhead of network latency and processing time for each call. <ul> <li>Implementation: By using the <code class="language-plaintext highlighter-rouge">n</code> parameter of the <code class="language-plaintext highlighter-rouge">openai.chat.completions.create</code> method, multiple commands can be generated at once. For example, a single API call can generate 5 commands instead of making 5 separate calls to generate 1 command each time.</li> <li>Prompt: Currently, the prompt can only generate one command at a time. Modifying it to generate <code class="language-plaintext highlighter-rouge">batch_size</code> commands at once can significantly reduce the number of API calls.</li> </ul> </li> </ol> <p>Original prompt:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">generate_instruction_prompt</span><span class="p">(</span><span class="n">action</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">
    Generate a prompt for the OpenAI API to create a driving instruction for a given action.
    </span><span class="sh">"""</span>
    <span class="k">return</span> <span class="sa">f</span><span class="sh">"""</span><span class="s">
    Generate a short driving instruction that includes the action </span><span class="sh">'</span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="sh">'</span><span class="s">. Here are three examples:
    1. </span><span class="sh">"</span><span class="s">Turn right at the next intersection.</span><span class="sh">"</span><span class="s">
    2. </span><span class="sh">"</span><span class="s">Go straight past the traffic light.</span><span class="sh">"</span><span class="s">
    3. </span><span class="sh">"</span><span class="s">Merge into the left lane.</span><span class="sh">"</span><span class="s">
    Generate an instruction that includes </span><span class="sh">'</span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="sh">'</span><span class="s">:
    </span><span class="sh">"""</span>
</code></pre></div></div> <p>New prompt for multiple instructions:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">def</span> <span class="nf">generate_instruction_prompt</span><span class="p">(</span><span class="n">action</span><span class="p">,</span> <span class="n">batch_size</span><span class="p">):</span>
    <span class="sh">"""</span><span class="s">
    Generate a prompt for the OpenAI API to create a driving instruction for a given action.
    </span><span class="sh">"""</span>
    <span class="k">return</span> <span class="sa">f</span><span class="sh">"""</span><span class="s">
    Generate a short driving instruction that includes the action </span><span class="sh">'</span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="sh">'</span><span class="s">.
    Make sure each instruction is distinct and uses different wording or context. Here are some examples:
    </span><span class="sh">"</span><span class="s">Turn right at the next intersection.</span><span class="sh">"</span><span class="s">
    </span><span class="sh">"</span><span class="s">Go straight past the traffic light.</span><span class="sh">"</span><span class="s">
    </span><span class="sh">"</span><span class="s">Merge into the left lane.</span><span class="sh">"</span><span class="s">
    </span><span class="sh">"</span><span class="s">At the roundabout, take the second exit.</span><span class="sh">"</span><span class="s">
    </span><span class="sh">"</span><span class="s">Keep left to stay on the main road.</span><span class="sh">"</span><span class="s">
    There does not need to be any numerical numbering or any prefixes.
    Generate </span><span class="si">{</span><span class="n">batch_size</span><span class="si">}</span><span class="s"> unique instruction that include </span><span class="sh">'</span><span class="si">{</span><span class="n">action</span><span class="si">}</span><span class="sh">'</span><span class="s">:
    </span><span class="sh">"""</span>
</code></pre></div></div> <p>After testing, we found that the new prompt can significantly reduce the data generation time and there are almost no duplicate commands. This suggests that to generate data with similar structures, a more effective way to increase speed and avoid duplication is to generate a large batch of data at the prompt stage.</p> <h3 id="parallel-processing">Parallel Processing</h3> <p>Besides reducing the number of API calls, another method is to fully utilize the current Tier 2 parallel potential. Given the 3500 RPM of GPT-3.5-turbo, there is still more room for parallel processing. Parallel processing can fully utilize the capabilities of multi-core CPUs, reducing the overall processing time. Especially in network I/O intensive operations such as API calls, parallel processing can significantly reduce waiting time.</p> <p>By using <code class="language-plaintext highlighter-rouge">concurrent.futures.ThreadPoolExecutor</code>, parallel processing is achieved.</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/gsoc2024-ZebinHuang/assets/img/optimized-480.webp 480w,/gsoc2024-ZebinHuang/assets/img/optimized-800.webp 800w,/gsoc2024-ZebinHuang/assets/img/optimized-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/gsoc2024-ZebinHuang/assets/img/optimized.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <p>In the optimized code, we combined the two methods mentioned above: using batch generation to reduce the number of API calls and using parallel processing to handle multiple batch generation requests simultaneously. The specific implementation steps are as follows:</p> <p><strong>Batch Generation of Commands:</strong></p> <p>Using the latest prompt mentioned above and passing in the <code class="language-plaintext highlighter-rouge">batch_size</code> parameter to generate multiple instructions at once. It is important to note that more tokens are needed (<code class="language-plaintext highlighter-rouge">max_tokens=10</code> in our case), and regular expressions should be used to handle any potential impurities in the data. For example, data entries like these: ”43. Proceed straight towards the tall building in the distance.“ or ”- Travel straight as the road bends to the left.” The following regex code can effectively remove impurities:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code>    <span class="c1"># Split multiple instructions from a single response
</span>    <span class="n">instructions</span> <span class="o">=</span> <span class="n">raw_instruction</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sh">'</span><span class="se">\n</span><span class="sh">'</span><span class="p">)</span>
    <span class="c1"># Remove leading numbers and punctuation from each instruction
</span>    <span class="n">instructions_list</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">re</span><span class="p">.</span><span class="nf">sub</span><span class="p">(</span><span class="sa">r</span><span class="sh">'</span><span class="s">^[\d\W]+</span><span class="sh">'</span><span class="p">,</span> <span class="sh">''</span><span class="p">,</span> <span class="n">instruction</span><span class="p">).</span><span class="nf">strip</span><span class="p">()</span> <span class="k">for</span> <span class="n">instruction</span> <span class="ow">in</span> <span class="n">instructions</span>
    <span class="p">]</span>
</code></pre></div></div> <p>In the <code class="language-plaintext highlighter-rouge">fetch_instructions</code> and <code class="language-plaintext highlighter-rouge">generate_instructions_batch</code> functions in <code class="language-plaintext highlighter-rouge">utils.py</code>, use the <code class="language-plaintext highlighter-rouge">n</code> parameter to generate multiple commands at once. This method was later removed because the prompt itself can generate a sufficient number of instructions.</p> <p><strong>Thread Pool:</strong></p> <p>In the <code class="language-plaintext highlighter-rouge">generate_dataset</code> function in <code class="language-plaintext highlighter-rouge">dataset_generator.py</code>, use <code class="language-plaintext highlighter-rouge">ThreadPoolExecutor</code> to parallelize the execution of multiple batch generation requests.</p> <p><code class="language-plaintext highlighter-rouge">ThreadPoolExecutor</code> is used to manage concurrent tasks, where each task generates a batch of instructions for a given action. It ensures that a unique set of instructions is generated for each action, dynamically adjusting the batch size to ensure at least five samples per batch while not exceeding the maximum batch size. The tasks are submitted to the <code class="language-plaintext highlighter-rouge">executor</code>, and the future results are mapped to their respective actions for further processing.</p> <p>By default, <code class="language-plaintext highlighter-rouge">ThreadPoolExecutor</code> automatically determines the number of threads based on the system’s available resources. However, we can control the number of concurrent tasks more precisely by setting the thread pool size. If not specified, <code class="language-plaintext highlighter-rouge">ThreadPoolExecutor</code> will use a reasonable default value, usually <code class="language-plaintext highlighter-rouge">os.cpu_count()</code>.</p> <p>In addition to the core points mentioned above, there are other techniques that can be adopted.</p> <ol> <li><em>Reduce output token count</em></li> <li><em>Switch from GPT-4 to GPT-3.5</em></li> <li><em>Switch to Azure-hosted APIs</em></li> <li><em>Parallelize your calls</em></li> <li><em>Stream output and use stop sequences</em></li> </ol> <p>For more detailed information, you can refer to this blog: <a href="https://www.taivo.ai/__making-gpt-api-responses-faster/" rel="external nofollow noopener" target="_blank">Making GPT API Responses Faster</a></p> <p>Because the data structures we use are relatively simple, it’s easy to reduce the token count, and using GPT-3.5 is more cost-effective and faster.</p> <p>We used optimized methods to recreate the data and tested the generation efficiency under different conditions.</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">python</span> <span class="n">dataset_generator_batch_optimized</span><span class="p">.</span><span class="n">py</span> <span class="o">--</span><span class="n">actions</span> <span class="n">Straight</span> <span class="n">Right</span> <span class="n">LaneFollow</span> <span class="n">Left</span> <span class="o">--</span><span class="n">num_samples</span> <span class="mi">1000</span> <span class="o">--</span><span class="n">output_file</span> <span class="p">.</span><span class="o">/</span><span class="n">datasets</span><span class="o">/</span><span class="n">user_instructions</span><span class="o">/</span><span class="n">dataset_4000</span><span class="p">.</span><span class="n">csv</span> <span class="o">--</span><span class="n">max_batch_size</span> <span class="mi">100</span>
</code></pre></div></div> <table> <thead> <tr> <th>Instructions Generated</th> <th>Time (seconds)</th> </tr> </thead> <tbody> <tr> <td>500</td> <td>26.09</td> </tr> <tr> <td>1000</td> <td>44.97</td> </tr> <tr> <td>4000</td> <td>159.67</td> </tr> </tbody> </table> <p>In the previous method, generating 100 instructions took 158.48 seconds, and the data set stopped growing around 1k. With the new method, this limit can be easily surpassed, and the time to generate data has been significantly reduced.</p> <p>Here is the complete terminal output log for <code class="language-plaintext highlighter-rouge">dataset_4000.csv</code>:</p> <div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">python</span> <span class="n">dataset_generator_batch_optimized</span><span class="p">.</span><span class="n">py</span> <span class="o">--</span><span class="n">actions</span> <span class="n">Straight</span> <span class="n">Right</span> <span class="n">LaneFollow</span> <span class="n">Left</span> <span class="o">--</span><span class="n">num_samples</span> <span class="mi">1000</span> <span class="o">--</span><span class="n">output_file</span> <span class="p">.</span><span class="o">/</span><span class="n">datasets</span><span class="o">/</span><span class="n">user_instructions</span><span class="o">/</span><span class="n">dataset_4000</span><span class="p">.</span><span class="n">csv</span> <span class="o">--</span><span class="n">max_batch_size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">94</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">6</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">94</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">6</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">60</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">40</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">84</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">16</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">167</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">27</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">184</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">10</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">167</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">17</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">144</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">16</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">250</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">17</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">271</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">13</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">228</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">16</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">252</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">15</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">338</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">14</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">336</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">14</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">305</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">23</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">348</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">23</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">439</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">9</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">434</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">4</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">419</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">17</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">394</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">11</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">522</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">17</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">502</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">17</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">524</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">10</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">472</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">22</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">607</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">15</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">595</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">29</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">577</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">25</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">555</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">17</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">688</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">7</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">699</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">8</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">661</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">16</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">637</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">18</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">747</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">14</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">782</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">6</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">706</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">31</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">785</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">14</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">875</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">10</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">783</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">23</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">830</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">17</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">855</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">27</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">945</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">10</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">915</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">15</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">862</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">21</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">957</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">18</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">86</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Straight</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">1019</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">12</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">86</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">1036</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">7</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Right</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">1003</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">12</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">944</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">18</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">Left</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">1075</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">25</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Submitting</span> <span class="n">batch</span> <span class="n">generation</span> <span class="k">for</span> <span class="n">action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span> <span class="k">with</span> <span class="n">batch</span> <span class="n">size</span> <span class="mi">100</span>
<span class="n">Action</span> <span class="sh">'</span><span class="s">LaneFollow</span><span class="sh">'</span><span class="p">:</span> <span class="n">Generated</span> <span class="mi">1026</span> <span class="o">/</span> <span class="mi">1000</span> <span class="n">unique</span> <span class="nf">instructions </span><span class="p">(</span><span class="n">Discarded</span> <span class="mi">18</span> <span class="n">duplicates</span><span class="p">)</span>
<span class="n">Total</span> <span class="nf">discarded </span><span class="p">(</span><span class="n">duplicate</span><span class="p">)</span> <span class="n">instructions</span><span class="p">:</span> <span class="mi">813</span>
                                            <span class="n">instruction</span>      <span class="n">action</span>
<span class="mi">0</span>                                                    <span class="sh">""</span>  <span class="p">[</span><span class="n">Straight</span><span class="p">]</span>
<span class="mi">1</span>     <span class="sh">"</span><span class="s">Continue straight on this route until you see...  [Straight]
2             </span><span class="sh">"</span><span class="n">Go</span> <span class="n">straight</span> <span class="n">onto</span> <span class="n">the</span> <span class="n">highway</span> <span class="nb">exit</span> <span class="n">ramp</span><span class="p">.</span><span class="sh">"</span><span class="s">  [Straight]
3                    </span><span class="sh">"</span><span class="n">Head</span> <span class="n">straight</span> <span class="n">along</span> <span class="n">this</span> <span class="n">avenue</span><span class="p">.</span><span class="sh">"</span><span class="s">  [Straight]
4     </span><span class="sh">"</span><span class="n">Navigate</span> <span class="n">the</span> <span class="n">roundabout</span> <span class="ow">and</span> <span class="n">take</span> <span class="n">the</span> <span class="nb">exit</span> <span class="nb">str</span><span class="p">...</span>  <span class="p">[</span><span class="n">Straight</span><span class="p">]</span>
<span class="p">...</span>                                                 <span class="p">...</span>         <span class="bp">...</span>
<span class="mi">3995</span>  <span class="sh">"</span><span class="s">Watch for any obstructions on the left side o...      [Left]
3996               </span><span class="sh">"</span><span class="n">Signal</span> <span class="n">left</span> <span class="n">before</span> <span class="n">changing</span> <span class="n">lanes</span><span class="p">.</span><span class="sh">"</span><span class="s">      [Left]
3997              </span><span class="sh">"</span><span class="n">Stay</span> <span class="n">left</span> <span class="n">to</span> <span class="n">enter</span> <span class="n">the</span> <span class="n">parking</span> <span class="n">lot</span><span class="p">.</span><span class="sh">"</span><span class="s">      [Left]
3998  </span><span class="sh">"</span><span class="n">Merge</span> <span class="n">into</span> <span class="n">the</span> <span class="n">left</span> <span class="n">lane</span> <span class="k">for</span> <span class="n">the</span> <span class="n">upcoming</span> <span class="n">lef</span><span class="p">...</span>      <span class="p">[</span><span class="n">Left</span><span class="p">]</span>
<span class="mi">3999</span>              <span class="sh">"</span><span class="s">Proceed left at the T-intersection.</span><span class="sh">"</span>      <span class="p">[</span><span class="n">Left</span><span class="p">]</span>

<span class="p">[</span><span class="mi">4000</span> <span class="n">rows</span> <span class="n">x</span> <span class="mi">2</span> <span class="n">columns</span><span class="p">]</span>
<span class="n">Dataset</span> <span class="n">generated</span> <span class="ow">and</span> <span class="n">saved</span> <span class="n">to</span> <span class="sh">'</span><span class="s">./datasets/user_instructions/dataset_4000.csv</span><span class="sh">'</span>
<span class="n">Generated</span> <span class="mi">4000</span> <span class="n">instructions</span> <span class="ow">in</span> <span class="mf">159.67</span> <span class="n">seconds</span><span class="p">.</span>
</code></pre></div></div> <p>Word cloud map analysis of the dataset</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/gsoc2024-ZebinHuang/assets/img/word_cloud_714-480.webp 480w,/gsoc2024-ZebinHuang/assets/img/word_cloud_714-800.webp 800w,/gsoc2024-ZebinHuang/assets/img/word_cloud_714-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/gsoc2024-ZebinHuang/assets/img/word_cloud_714.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> <h3 id="conclusion">Conclusion</h3> <p>For generating similar types of instruction data, a more efficient approach is:</p> <ul> <li>Deduplication: Instruct the model to generate multiple unique pieces of data in a single prompt, rather than using the same prompt multiple times and then deduplicating, as this does not improve the quality of the data.</li> <li>Acceleration: Reduce the number of requests, increase the amount generated per request, and use parallel processing.</li> </ul> <p>The above test results are based on a not fully optimized setup. I believe further optimization is possible. This method is scalable in terms of data. Regarding performance, one of the biggest impacts is <code class="language-plaintext highlighter-rouge">num_threads</code>; I currently use around 10. Additionally, for <code class="language-plaintext highlighter-rouge">max_batch_size</code>, I generally use 100.</p> <p>It is also worth noting that the development cost is relatively affordable. Throughout the entire development cycle, my API usage bill did not exceed $10.</p> <figure> <picture> <source class="responsive-img-srcset" srcset="/gsoc2024-ZebinHuang/assets/img/api_usage-480.webp 480w,/gsoc2024-ZebinHuang/assets/img/api_usage-800.webp 800w,/gsoc2024-ZebinHuang/assets/img/api_usage-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/gsoc2024-ZebinHuang/assets/img/api_usage.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" data-zoomable="" loading="lazy" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </d-article> <d-appendix> <d-footnote-list></d-footnote-list> <d-citation-list></d-citation-list> </d-appendix> <d-bibliography src="/gsoc2024-ZebinHuang/assets/bibliography/posts.bib"></d-bibliography> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2024 Zebin Huang. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a> theme. Hosted by <a href="https://pages.github.com/" target="_blank" rel="external nofollow noopener">GitHub Pages</a>. </div> </footer> <script src="/gsoc2024-ZebinHuang/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> </body> </html>